{
  "name": "Fantasy_vf",
  "description": "",
  "nodes": [
    {
      "id": "019ae7da-7552-733a-9700-503f669f6b0b",
      "type": "start",
      "position": {
        "x": 230.10963483983122,
        "y": 32.81204064577879
      },
      "data": {},
      "deletable": false,
      "zIndex": 1000
    },
    {
      "id": "019ae7da-7552-733a-9700-5a52b9308eb2",
      "type": "end",
      "position": {
        "x": 3525.0502588327454,
        "y": 258.8641374663423
      },
      "data": {},
      "deletable": false,
      "zIndex": 1000
    },
    {
      "id": "019ae7da-7552-733a-9700-60f43eb53af5",
      "type": "agent",
      "position": {
        "x": 782.0528920856339,
        "y": -143.02162864299328
      },
      "data": {},
      "deletable": false
    },
    {
      "id": "019ae7da-7552-733a-9700-7451df30d270",
      "type": "agent",
      "position": {
        "x": 809.3639786890335,
        "y": 785.637798364797
      },
      "data": {},
      "deletable": false
    },
    {
      "id": "019ae7da-7552-733a-9700-7bbd12591a84",
      "type": "agent",
      "position": {
        "x": 1960.043987473423,
        "y": 146.67499096417816
      },
      "data": {},
      "deletable": false
    },
    {
      "id": "019ae7da-7552-733a-9700-803e1bcd4baa",
      "type": "agent",
      "position": {
        "x": 1181.8957336188691,
        "y": -182.7361655425746
      },
      "data": {},
      "deletable": false
    },
    {
      "id": "019ae7da-7552-733a-9700-89254170b262",
      "type": "dataStore",
      "position": {
        "x": 1567.7175403769104,
        "y": -17.00105627258389
      },
      "data": {
        "name": "New Data Update",
        "color": "#FCD34D",
        "dataStoreFields": [
          {
            "id": "019a2e91-3fa3-7eeb-9d6f-7ca5c478a941",
            "logic": "{{hp-results_tally.hp_diff}}",
            "schemaFieldId": "019a2ae9-32ea-7333-ab7d-88985327b33d"
          },
          {
            "id": "019a2e93-6783-7eeb-9d6f-87a36cf8420f",
            "logic": "{{mp-results_tally.mp_diff}}",
            "schemaFieldId": "019a2aea-62e5-7333-ab7d-9dd99fb3acbb"
          },
          {
            "id": "019a2e93-d33d-7eeb-9d6f-8e851f571bcd",
            "logic": "{{results_tally.user_status}}",
            "schemaFieldId": "019a2aeb-744e-7333-ab7d-a8d4ae783943"
          },
          {
            "id": "019a2e94-571d-7eeb-9d6f-90f9527ccad2",
            "logic": "{{results_tally.is_battle}}",
            "schemaFieldId": "019a2b00-b800-7333-ab7d-c926a56b202c"
          }
        ]
      },
      "deletable": false
    },
    {
      "id": "019ae7da-7552-733a-9700-95e5847bc895",
      "type": "agent",
      "position": {
        "x": 796.5497364885008,
        "y": 324.7232217011141
      },
      "data": {},
      "deletable": false
    },
    {
      "id": "019ae7da-7552-733a-9700-9bda75186272",
      "type": "dataStore",
      "position": {
        "x": 2360.043987473423,
        "y": 198.0583271929939
      },
      "data": {
        "name": "Summary update",
        "color": "#F0ABFC",
        "dataStoreFields": [
          {
            "id": "019a71b7-f5b0-7445-a1a0-8f0a55165e64",
            "logic": "{{summarization.response}}",
            "schemaFieldId": "019a71a6-bc7b-711e-956d-ffea65a0f685"
          }
        ]
      },
      "deletable": false
    },
    {
      "id": "019ae7da-7552-733a-9700-a6bbc23678c1",
      "type": "dataStore",
      "position": {
        "x": 2760.043987473423,
        "y": 248.0583271929939
      },
      "data": {
        "name": "before_end_node",
        "color": "#FDE047",
        "dataStoreFields": []
      },
      "deletable": false
    },
    {
      "id": "7f8d0ca9-224e-4a63-a23f-98a58692332d",
      "type": "start",
      "position": {
        "x": 233.33159483205526,
        "y": 437.4063836233216
      },
      "data": {
        "nodeVariant": "user"
      },
      "deletable": false,
      "zIndex": 1000
    },
    {
      "id": "bb6dee6d-5ffa-40b2-9293-990cf9c2ad81",
      "type": "start",
      "position": {
        "x": 238.51674138387872,
        "y": 909.3263989822176
      },
      "data": {
        "nodeVariant": "scenario"
      },
      "deletable": false,
      "zIndex": 1000
    }
  ],
  "edges": [
    {
      "id": "019ae7da-7552-733a-9700-b9b04e0fefad",
      "source": "019ae7da-7552-733a-9700-7451df30d270",
      "target": "019ae7da-7552-733a-9700-7bbd12591a84"
    },
    {
      "id": "019ae7da-7552-733a-9700-c534aaf5ca03",
      "source": "019ae7da-7552-733a-9700-60f43eb53af5",
      "target": "019ae7da-7552-733a-9700-803e1bcd4baa"
    },
    {
      "id": "019ae7da-7552-733a-9700-c864d95f024c",
      "source": "019ae7da-7552-733a-9700-803e1bcd4baa",
      "target": "019ae7da-7552-733a-9700-89254170b262"
    },
    {
      "id": "019ae7da-7552-733a-9700-d774d7c56417",
      "source": "019ae7da-7552-733a-9700-89254170b262",
      "target": "019ae7da-7552-733a-9700-7bbd12591a84"
    },
    {
      "id": "019ae7da-7552-733a-9700-dc1c8787d3f4",
      "source": "019ae7da-7552-733a-9700-95e5847bc895",
      "target": "019ae7da-7552-733a-9700-7bbd12591a84"
    },
    {
      "id": "019ae7da-7552-733a-9700-ea7d3131cbd3",
      "source": "019ae7da-7552-733a-9700-7bbd12591a84",
      "target": "019ae7da-7552-733a-9700-9bda75186272"
    },
    {
      "id": "019ae7da-7552-733a-9700-f0ee39c732f3",
      "source": "019ae7da-7552-733a-9700-9bda75186272",
      "target": "019ae7da-7552-733a-9700-a6bbc23678c1"
    }
  ],
  "responseTemplate": "{{rp_agent_character.response}}\n{{rp_agent_user.response}}\n{{rp_agent_scenario.response}}",
  "createdAt": "2025-12-04T05:39:13.099Z",
  "updatedAt": "2025-12-04T05:39:13.099Z",
  "panelStructure": {
    "panels": [],
    "version": 2,
    "activePanel": "flow-panel-main",
    "panelMetadata": {
      "flow-panel-main": {
        "title": "Flow Editor",
        "params": {
          "title": "Flow Editor",
          "flowId": "019ae7da-7552-733a-9700-ad94fade375a"
        },
        "component": "flow"
      },
      "responseDesign-standalone": {
        "title": "Response Design",
        "params": {
          "title": "Response Design",
          "flowId": "019ae7da-7552-733a-9700-ad94fade375a",
          "panelType": "responseDesign"
        },
        "component": "responseDesign"
      },
      "prompt-019ae7da-7552-733a-9700-60f43eb53af5": {
        "title": "[Battle response AI char] Prompt",
        "params": {
          "title": "[rp_agent_character] Prompt",
          "flowId": "019ae7da-7552-733a-9700-ad94fade375a",
          "agentId": "019ae7da-7552-733a-9700-60f43eb53af5",
          "panelType": "prompt",
          "agentColor": "#A5B4FC",
          "agentInactive": true
        },
        "component": "prompt"
      },
      "prompt-019ae7da-7552-733a-9700-7bbd12591a84": {
        "title": "[Summarization] Prompt",
        "params": {
          "title": "[Summarization] Prompt",
          "flowId": "019ae7da-7552-733a-9700-ad94fade375a",
          "agentId": "019ae7da-7552-733a-9700-7bbd12591a84",
          "panelType": "prompt",
          "agentColor": "#FCA5A5",
          "agentInactive": true
        },
        "component": "prompt"
      },
      "prompt-019ae7da-7552-733a-9700-95e5847bc895": {
        "title": "[rp_agent_user] Prompt",
        "params": {
          "title": "[rp_agent_user] Prompt",
          "flowId": "019ae7da-7552-733a-9700-ad94fade375a",
          "agentId": "019ae7da-7552-733a-9700-95e5847bc895",
          "panelType": "prompt",
          "agentColor": "#67E8F9",
          "agentInactive": true
        },
        "component": "prompt"
      },
      "dataStore-019ae7da-7552-733a-9700-9bda75186272": {
        "title": "[Data Update] Data update",
        "params": {
          "title": "[Data Update] Data update",
          "flowId": "019ae7da-7552-733a-9700-ad94fade375a",
          "nodeId": "019ae7da-7552-733a-9700-9bda75186272",
          "agentId": "019ae7da-7552-733a-9700-9bda75186272",
          "panelType": "dataStore"
        },
        "component": "dataStore"
      },
      "structuredOutput-019ae7da-7552-733a-9700-60f43eb53af5": {
        "title": "[rp_agent_character] Output",
        "params": {
          "title": "[rp_agent_character] Output",
          "flowId": "019ae7da-7552-733a-9700-ad94fade375a",
          "agentId": "019ae7da-7552-733a-9700-60f43eb53af5",
          "panelType": "structuredOutput",
          "agentColor": "#A5B4FC",
          "agentInactive": true
        },
        "component": "structuredOutput"
      },
      "structuredOutput-019ae7da-7552-733a-9700-7bbd12591a84": {
        "title": "[Summarization] Output",
        "params": {
          "title": "[Summarization] Output",
          "flowId": "019ae7da-7552-733a-9700-ad94fade375a",
          "agentId": "019ae7da-7552-733a-9700-7bbd12591a84",
          "panelType": "structuredOutput",
          "agentColor": "#FCA5A5",
          "agentInactive": true
        },
        "component": "structuredOutput"
      }
    },
    "serializedLayout": {
      "grid": {
        "root": {
          "data": [
            {
              "data": {
                "id": "1",
                "views": [
                  "flow-panel-main"
                ],
                "locked": true,
                "activeView": "flow-panel-main"
              },
              "size": 641,
              "type": "leaf"
            },
            {
              "data": {
                "id": "2",
                "views": [
                  "prompt-019ae7da-7552-733a-9700-60f43eb53af5",
                  "dataStore-019ae7da-7552-733a-9700-9bda75186272",
                  "structuredOutput-019ae7da-7552-733a-9700-7bbd12591a84",
                  "prompt-019ae7da-7552-733a-9700-7bbd12591a84",
                  "responseDesign-standalone",
                  "structuredOutput-019ae7da-7552-733a-9700-60f43eb53af5",
                  "prompt-019ae7da-7552-733a-9700-95e5847bc895"
                ],
                "activeView": "prompt-019ae7da-7552-733a-9700-95e5847bc895"
              },
              "size": 1007,
              "type": "leaf"
            }
          ],
          "size": 992,
          "type": "branch"
        },
        "width": 1648,
        "height": 992,
        "orientation": "HORIZONTAL"
      },
      "panels": {
        "flow-panel-main": {
          "id": "flow-panel-main",
          "title": "Flow Editor",
          "params": {
            "title": "Flow Editor",
            "flowId": "019ae7da-7552-733a-9700-ad94fade375a"
          },
          "tabComponent": "colored",
          "contentComponent": "flow"
        },
        "responseDesign-standalone": {
          "id": "responseDesign-standalone",
          "title": "Response Design",
          "params": {
            "title": "Response Design",
            "flowId": "019ae7da-7552-733a-9700-ad94fade375a",
            "panelType": "responseDesign"
          },
          "tabComponent": "colored",
          "contentComponent": "responseDesign"
        },
        "prompt-019ae7da-7552-733a-9700-60f43eb53af5": {
          "id": "prompt-019ae7da-7552-733a-9700-60f43eb53af5",
          "title": "[Battle response AI char] Prompt",
          "params": {
            "title": "[rp_agent_character] Prompt",
            "flowId": "019ae7da-7552-733a-9700-ad94fade375a",
            "agentId": "019ae7da-7552-733a-9700-60f43eb53af5",
            "panelType": "prompt",
            "agentColor": "#A5B4FC",
            "agentInactive": true
          },
          "tabComponent": "colored",
          "contentComponent": "prompt"
        },
        "prompt-019ae7da-7552-733a-9700-7bbd12591a84": {
          "id": "prompt-019ae7da-7552-733a-9700-7bbd12591a84",
          "title": "[Summarization] Prompt",
          "params": {
            "title": "[Summarization] Prompt",
            "flowId": "019ae7da-7552-733a-9700-ad94fade375a",
            "agentId": "019ae7da-7552-733a-9700-7bbd12591a84",
            "panelType": "prompt",
            "agentColor": "#FCA5A5",
            "agentInactive": true
          },
          "tabComponent": "colored",
          "contentComponent": "prompt"
        },
        "prompt-019ae7da-7552-733a-9700-95e5847bc895": {
          "id": "prompt-019ae7da-7552-733a-9700-95e5847bc895",
          "title": "[rp_agent_user] Prompt",
          "params": {
            "title": "[rp_agent_user] Prompt",
            "flowId": "019ae7da-7552-733a-9700-ad94fade375a",
            "agentId": "019ae7da-7552-733a-9700-95e5847bc895",
            "panelType": "prompt",
            "agentColor": "#67E8F9",
            "agentInactive": true
          },
          "tabComponent": "colored",
          "contentComponent": "prompt"
        },
        "dataStore-019ae7da-7552-733a-9700-9bda75186272": {
          "id": "dataStore-019ae7da-7552-733a-9700-9bda75186272",
          "title": "[Data Update] Data update",
          "params": {
            "title": "[Data Update] Data update",
            "flowId": "019ae7da-7552-733a-9700-ad94fade375a",
            "nodeId": "019ae7da-7552-733a-9700-9bda75186272",
            "agentId": "019ae7da-7552-733a-9700-9bda75186272",
            "panelType": "dataStore"
          },
          "tabComponent": "colored",
          "contentComponent": "dataStore"
        },
        "structuredOutput-019ae7da-7552-733a-9700-60f43eb53af5": {
          "id": "structuredOutput-019ae7da-7552-733a-9700-60f43eb53af5",
          "title": "[rp_agent_character] Output",
          "params": {
            "title": "[rp_agent_character] Output",
            "flowId": "019ae7da-7552-733a-9700-ad94fade375a",
            "agentId": "019ae7da-7552-733a-9700-60f43eb53af5",
            "panelType": "structuredOutput",
            "agentColor": "#A5B4FC",
            "agentInactive": true
          },
          "tabComponent": "colored",
          "contentComponent": "structuredOutput"
        },
        "structuredOutput-019ae7da-7552-733a-9700-7bbd12591a84": {
          "id": "structuredOutput-019ae7da-7552-733a-9700-7bbd12591a84",
          "title": "[Summarization] Output",
          "params": {
            "title": "[Summarization] Output",
            "flowId": "019ae7da-7552-733a-9700-ad94fade375a",
            "agentId": "019ae7da-7552-733a-9700-7bbd12591a84",
            "panelType": "structuredOutput",
            "agentColor": "#FCA5A5",
            "agentInactive": true
          },
          "tabComponent": "colored",
          "contentComponent": "structuredOutput"
        }
      },
      "activeGroup": "1"
    }
  },
  "viewport": {
    "x": -151.9658455524077,
    "y": 115.23834920559938,
    "zoom": 0.7714343191694991
  },
  "dataStoreSchema": {
    "fields": [
      {
        "id": "019a2ae9-32ea-7333-ab7d-88985327b33d",
        "name": "hp",
        "type": "integer",
        "initialValue": "30"
      },
      {
        "id": "019a2aea-24b4-7333-ab7d-93cbc6de4158",
        "name": "max_hp",
        "type": "integer",
        "initialValue": "30"
      },
      {
        "id": "019a2aea-62e5-7333-ab7d-9dd99fb3acbb",
        "name": "mp",
        "type": "integer",
        "initialValue": "80"
      },
      {
        "id": "019a2aea-9f93-7333-ab7d-a2aec41df5f8",
        "name": "max_mp",
        "type": "integer",
        "initialValue": "100"
      },
      {
        "id": "019a2aeb-744e-7333-ab7d-a8d4ae783943",
        "name": "user_status",
        "type": "string",
        "initialValue": "‚úÖ Normal"
      },
      {
        "id": "019a2b00-b800-7333-ab7d-c926a56b202c",
        "name": "is_battle",
        "type": "boolean",
        "initialValue": "false"
      },
      {
        "id": "019a71a6-bc7b-711e-956d-ffea65a0f685",
        "name": "previous_summary",
        "type": "string",
        "initialValue": ""
      }
    ]
  },
  "readyState": "draft",
  "agents": {
    "019ae7da-7552-733a-9700-60f43eb53af5": {
      "name": "rp_agent_character",
      "description": "",
      "targetApiType": "chat",
      "apiSource": "lmstudio",
      "modelId": "llama-3.1-8b-stheno-v3.4",
      "modelName": "llama-3.1-8b-stheno-v3.4",
      "promptMessages": [
        {
          "type": "plain",
          "enabled": true,
          "role": "user",
          "promptBlocks": [
            {
              "name": "Message 1",
              "template": "You are {{cast.active}} in a physical situation. You must prevail in someway over those who threaten you.\r\n\r\n## Current Character Status\r\n- {{user.name}}'s current HP: {{hp}} / {{max_hp}}\r\n- {{user.name}}'s current MP: {{mp}} / {{max_mp}}\r\n- {{user.name}}'s status Conditions: {{user_status}}\r\n\r\n## Character Information\r\n{{cast.active}}\r\n\r\n## Scenario\r\n{{session.scenario}}\r\n\r\n## Guidelines\r\n1. **Combat & Mechanics**\r\n   - Calculate damage and healing realistically based on the action described\r\n   - Track resource consumption (MP for spells, HP for damage)\r\n   - Apply status effects logically (poison deals damage over time, paralysis prevents action, etc.)\r\n   - Make combat challenging but fair - avoid arbitrary deaths\r\n\r\n2. **Narrative Style**\r\n   - Write in an epic, immersive fantasy tone\r\n   - Use vivid descriptions of magic, combat, and environments\r\n   - Show consequences of actions through the story, not just numbers\r\n   - Maintain dramatic pacing - tension, action, and resolution\r\n\r\n3. **Consistency**\r\n   - Remember the current story summary and build upon it\r\n   - Keep character personalities and abilities consistent\r\n   - Respect established world-building and lore\r\n\r\n4. **User Agency**\r\n   - Respond to what the user actually does - don't decide their actions for them\r\n   - Present meaningful choices and consequences\r\n   - Allow creative problem-solving\r\n\r\n## Response Structure\r\nGenerate a structured response with:\r\n- Updated HP/MP values based on events\r\n- Current status conditions\r\n- A detailed scene description (2-4 paragraphs)\r\n\r\nMake the adventure feel alive, dangerous, and rewarding. Every action should have weight and consequence.\r\n\r\n## Additional Information\r\nUse any of the following information that is relevant to current situation. If it is not relevant, ignore it:\r\n\r\n{% for entry in session.entries %}\r\n{{entry}}\r\n{% endfor %}\r\n\r\n## Previous Summary\r\nExisting summary of conversation content up to the last update:\r\n{{previous_summary}}\r\n\r\n## New Messages\r\nNew conversation messages added since the last summary:",
              "type": "plain",
              "createdAt": "2025-11-11T06:55:45.727Z",
              "updatedAt": "2025-11-11T06:55:45.727Z",
              "id": "019a71b2-f83f-7998-815f-e473e0cba349"
            }
          ],
          "createdAt": "2025-11-11T06:55:45.727Z",
          "id": "message-1761658276122"
        },
        {
          "type": "history",
          "enabled": true,
          "historyType": "split",
          "start": 0,
          "end": 10,
          "countFromEnd": true,
          "userPromptBlocks": [
            {
              "name": "History Message 1",
              "template": "{{turn.char_name}}: {{turn.content}}",
              "type": "plain",
              "createdAt": "2025-11-11T06:55:45.727Z",
              "updatedAt": "2025-11-11T06:55:45.727Z",
              "id": "019a71b2-f83f-7998-815f-ed51b7f3debc"
            }
          ],
          "assistantPromptBlocks": [
            {
              "name": "History Message 1",
              "template": "{{turn.char_name}}: {{turn.content}}",
              "type": "plain",
              "createdAt": "2025-11-11T06:55:45.727Z",
              "updatedAt": "2025-11-11T06:55:45.727Z",
              "id": "019a71b2-f83f-7998-815f-f7264de05307"
            }
          ],
          "userMessageRole": "user",
          "charMessageRole": "assistant",
          "subCharMessageRole": "user",
          "createdAt": "2025-11-11T06:55:45.727Z",
          "id": "history-1761659441197"
        },
        {
          "type": "plain",
          "enabled": true,
          "role": "user",
          "promptBlocks": [
            {
              "name": "Message 3",
              "template": "Dont forget you are playing as {{char.name}}. Do not speak or take action on behalf of user characters. User can play a lot of characters, but you should only focus on \"{{char.name}}\". You should always respond in first person, in the perspective of {{char.name}}.\n",
              "type": "plain",
              "createdAt": "2025-11-11T06:55:45.727Z",
              "updatedAt": "2025-11-11T06:55:45.727Z",
              "id": "019a71b2-f83f-7998-815f-fc591fa8f262"
            }
          ],
          "createdAt": "2025-11-11T06:55:45.727Z",
          "id": "message-1762844082551"
        }
      ],
      "textPrompt": "",
      "enabledParameters": {},
      "parameterValues": {},
      "enabledStructuredOutput": false,
      "outputFormat": "text_output",
      "outputStreaming": true,
      "schemaName": "response",
      "schemaFields": [],
      "tokenCount": 0,
      "color": "#A5B4FC",
      "createdAt": "2025-12-04T05:34:05.156Z",
      "updatedAt": "2025-12-04T05:35:40.402Z",
      "modelTier": "light",
      "flowId": "019ae7da-7552-733a-9700-ad94fade375a"
    },
    "019ae7da-7552-733a-9700-7451df30d270": {
      "name": "rp_agent_scenario",
      "description": "",
      "targetApiType": "chat",
      "apiSource": "lmstudio",
      "modelId": "llama-3.1-8b-stheno-v3.4",
      "modelName": "llama-3.1-8b-stheno-v3.4",
      "promptMessages": [
        {
          "type": "plain",
          "enabled": true,
          "role": "system",
          "promptBlocks": [
            {
              "name": "Message 1",
              "template": "You are the SCENARIO NARRATOR / WORLD ENVIRONMENT in a fantasy roleplay. You are omniscient - you know everything about the world, all characters, and all events.\n\nYour job is to:\n1. Describe the world/environment and what's happening around the characters\n2. Move the story forward when it stalls or needs direction\n3. Introduce events, NPCs, or environmental changes to keep things interesting\n4. CORRECT inconsistencies or errors in the story (you know the truth)\n5. Provide world reactions to character actions\n\nIntroduce challenges, opportunities, and NPCs that fit the world's tone and theme. Whatever the characters do, decide how the environment and the surrounding elements and characters will act according to the character actions. When characters walk into danger, you determine what lurks in the shadows.\n\nRespond to the character's choices with consequences, both immediate and long-term. Actions have weight. Decisions matter. The world reacts and also initiates conflicts, events, and relationships.\n\nGoal: ensure {{user.name}}'s journey remains engaging: provide conflicts to overcome, mysteries to unravel, allies to meet, and enemies to face. Every scene should present something interesting - a choice to make, a threat to handle, or a secret to discover.\n\nYou are the world itself, responding to what happens and offering what's needed to create a memorable story.\n\n## World Setting & Characters\n\n### Main Character (AI-controlled)\n- Name: {{cast.active.name}}\n- Description: {{cast.active.description}}\n\n### User's Character\n- Name: {{user.name}}\n- Description: {{user.description}}\n\n## Scenario\n{{session.scenario}}\n\n## Significant information\n{% for entry in session.entries %}\n{{entry}}\n{% endfor %}\n\n## Previous Summary\n{{previous_summary}}\n\n## Last Message",
              "type": "plain",
              "createdAt": "2025-11-11T06:53:34.664Z",
              "updatedAt": "2025-11-11T06:53:34.664Z",
              "id": "019a71b0-f848-7bb4-bba9-cde67ac6b936"
            }
          ],
          "createdAt": "2025-11-11T06:53:34.664Z",
          "id": "message-1761719181030"
        },
        {
          "type": "history",
          "enabled": true,
          "historyType": "split",
          "start": 0,
          "end": 10,
          "countFromEnd": true,
          "userPromptBlocks": [
            {
              "name": "History Message 1",
              "template": "{{turn.char_name}}: {{turn.content}}",
              "type": "plain",
              "createdAt": "2025-11-11T06:53:34.664Z",
              "updatedAt": "2025-11-11T06:53:34.664Z",
              "id": "019a71b0-f848-7bb4-bba9-d29a13feb19c"
            }
          ],
          "assistantPromptBlocks": [
            {
              "name": "History Message 1",
              "template": "{{turn.char_name}}: {{turn.content}}",
              "type": "plain",
              "createdAt": "2025-11-11T06:53:34.664Z",
              "updatedAt": "2025-11-11T06:53:34.664Z",
              "id": "019a71b0-f848-7bb4-bba9-d8e2f0cd27ee"
            }
          ],
          "userMessageRole": "user",
          "charMessageRole": "assistant",
          "subCharMessageRole": "user",
          "createdAt": "2025-11-11T06:53:34.664Z",
          "id": "history-1761723427617"
        },
        {
          "type": "plain",
          "enabled": true,
          "role": "user",
          "promptBlocks": [
            {
              "name": "Critical Rules",
              "template": "#Critical Scenario Rules\n- You are the WORLD/ENVIRONMENT narrator, not a character.\n- You know EVERYTHING - use this to keep the story consistent and accurate.\n- If something is wrong or off in the story, correct it through natural narration.\n- Move the story forward when needed - introduce events, describe consequences.\n- **CRITICAL: NEVER write dialogue or actions for {{cast.active.name}}, {{user.name}}, or other main characters.**\n- You may control minor NPCs and environmental elements.\n- Keep responses focused and purposeful - don't over-narrate.\n- Support the characters' story, don't overshadow it.\n- Write in third person omniscient POV.\n",
              "type": "plain",
              "createdAt": "2025-11-11T06:53:34.664Z",
              "updatedAt": "2025-11-11T06:53:34.664Z",
              "id": "019a71b0-f848-7bb4-bba9-f000000000001"
            }
          ],
          "createdAt": "2025-11-11T06:53:34.664Z",
          "id": "message-1761723500000"
        }
      ],
      "textPrompt": "",
      "enabledParameters": {},
      "parameterValues": {},
      "enabledStructuredOutput": false,
      "outputFormat": "text_output",
      "outputStreaming": true,
      "schemaName": "response",
      "schemaFields": [],
      "tokenCount": 0,
      "color": "#BEF264",
      "createdAt": "2025-12-04T05:34:05.163Z",
      "updatedAt": "2025-12-04T05:36:29.062Z",
      "modelTier": "light",
      "flowId": "019ae7da-7552-733a-9700-ad94fade375a"
    },
    "019ae7da-7552-733a-9700-7bbd12591a84": {
      "name": "Summarization",
      "description": "",
      "targetApiType": "chat",
      "apiSource": "lmstudio",
      "modelId": "llama-3.1-8b-stheno-v3.4",
      "modelName": "llama-3.1-8b-stheno-v3.4",
      "promptMessages": [
        {
          "type": "plain",
          "enabled": true,
          "role": "system",
          "promptBlocks": [
            {
              "name": "Message 1",
              "template": "You are a professional summary agent that continuously tracks conversation content and updates summaries. \r\n\r\n## Previous Summary\r\n{{previous_summary}}\r\n\r\n## Scenario\r\n{{session.scenario}}\r\n\r\n## Summary Generation Rules\r\n\r\n### 1. Information Integration Principles\r\n- Preserve core information from previous summary while adding new information\r\n- Update with latest information when new information modifies or supplements existing information\r\n- Prioritize most recent information when contradictory information exists\r\n\r\n### 2. Processing Newly Discovered Facts\r\n- Clearly identify new facts, insights, and decisions found in New Messages\r\n- Add new topics or perspectives not present in existing summary\r\n- Reflect conversation progress or status changes\r\n\r\n### 3. Structure and Organization\r\n- Group information by topic to maintain logical flow\r\n- Maintain chronological order when temporal sequence is important\r\n- Clearly mark key points with bullet points\r\n\r\n### 4. Deduplication and Conciseness\r\n- Avoid repetition of identical information; mention only once\r\n- Remove unnecessary details while maintaining information needed for context understanding\r\n- Keep summary length proportional to information volume, but as concise as possible\r\n\r\n### 5. Context Preservation\r\n- Include conversation purpose, participants, and major decisions\r\n- Specify unresolved questions or action items\r\n- Emphasize important agreements or conclusions\r\n\r\n## Processing Process\r\n\r\n### 1. Analysis Phase\r\n - Read entire Previous Summary and identify core information\r\n - Analyze New Messages to extract new information\r\n - Identify relationships between information and changes\r\n\r\n### 2. Integration Phase\r\n - Map existing and new information by topic\r\n - Resolve conflicting information (prioritize latest information)\r\n - Add new topics or categories\r\n\r\n### 3. Refinement Phase\r\n - Remove duplicates\r\n - Reorganize for logical flow\r\n - Ensure clarity and conciseness\r\n\r\n### 4. Verification Phase\r\n - Confirm all important information is included\r\n - Verify new information is properly marked\r\n - Review overall consistency\r\n\r\n## Recent Messages",
              "type": "plain",
              "createdAt": "2025-11-11T06:54:10.817Z",
              "updatedAt": "2025-11-11T06:54:10.817Z",
              "id": "019a71b1-8581-7bb4-bbaa-9e9e49234b84"
            }
          ],
          "createdAt": "2025-11-11T06:54:10.817Z",
          "id": "message-1761718281364"
        },
        {
          "type": "history",
          "enabled": true,
          "historyType": "split",
          "start": 0,
          "end": 5,
          "countFromEnd": true,
          "userPromptBlocks": [
            {
              "name": "History Message 1",
              "template": "{{turn.char_name}}: {{turn.content}}",
              "type": "plain",
              "createdAt": "2025-11-11T06:54:10.817Z",
              "updatedAt": "2025-11-11T06:54:10.817Z",
              "id": "019a71b1-8581-7bb4-bbaa-a41d8f56a8bc"
            }
          ],
          "assistantPromptBlocks": [
            {
              "name": "History Message 1",
              "template": "{{turn.char_name}}: {{turn.content}}",
              "type": "plain",
              "createdAt": "2025-11-11T06:54:10.817Z",
              "updatedAt": "2025-11-11T06:54:10.817Z",
              "id": "019a71b1-8581-7bb4-bbaa-acf5d5f4ad66"
            }
          ],
          "userMessageRole": "user",
          "charMessageRole": "assistant",
          "subCharMessageRole": "user",
          "createdAt": "2025-11-11T06:54:10.817Z",
          "id": "history-1761718321659"
        }
      ],
      "textPrompt": "",
      "enabledParameters": {},
      "parameterValues": {},
      "enabledStructuredOutput": false,
      "outputFormat": "text_output",
      "outputStreaming": false,
      "schemaName": "response",
      "schemaFields": [],
      "tokenCount": 0,
      "color": "#FCA5A5",
      "createdAt": "2025-12-04T05:34:05.169Z",
      "updatedAt": "2025-12-04T05:34:05.169Z",
      "modelTier": "light",
      "flowId": "019ae7da-7552-733a-9700-ad94fade375a"
    },
    "019ae7da-7552-733a-9700-803e1bcd4baa": {
      "name": "Results Tally",
      "description": "",
      "targetApiType": "chat",
      "apiSource": "lmstudio",
      "modelId": "llama-3.1-8b-stheno-v3.4",
      "modelName": "llama-3.1-8b-stheno-v3.4",
      "promptMessages": [
        {
          "type": "plain",
          "enabled": true,
          "role": "system",
          "promptBlocks": [
            {
              "name": "Message 1",
              "template": "Analyze the situation and give an appropriate and logical response:\r\n\r\n## Current Character Status\r\n- {{user.name}}'s current HP: {{hp}} / {{max_hp}}\r\n- {{user.name}}'s current MP: {{mp}} / {{max_mp}}\r\n- {{user.name}}'s status Conditions: {{user_status}}\r\n\r\n## Most Recent Situation\r\n{{rp_agent_character.response}}",
              "type": "plain",
              "createdAt": "2025-11-11T07:04:39.507Z",
              "updatedAt": "2025-12-04T05:35:40.399Z",
              "id": "019a71bb-1d53-7445-a1a0-f958d0f7dafe"
            }
          ],
          "createdAt": "2025-11-11T07:04:39.507Z",
          "updatedAt": "2025-12-04T05:35:40.399Z",
          "id": "message-1761712710868"
        },
        {
          "type": "plain",
          "enabled": true,
          "role": "user",
          "promptBlocks": [
            {
              "name": "Message 3",
              "template": "## Situation Leading upto Now\r\n",
              "type": "plain",
              "createdAt": "2025-11-11T07:04:39.507Z",
              "updatedAt": "2025-11-11T07:04:39.507Z",
              "id": "019a71bb-1d53-7445-a1a1-02aaf8697622"
            }
          ],
          "createdAt": "2025-11-11T07:04:39.507Z",
          "id": "message-1761712933646"
        },
        {
          "type": "history",
          "enabled": true,
          "historyType": "split",
          "start": 0,
          "end": 10,
          "countFromEnd": true,
          "userPromptBlocks": [
            {
              "name": "History Message 1",
              "template": "{{turn.char_name}}: {{turn.content}}",
              "type": "plain",
              "createdAt": "2025-11-11T07:04:39.507Z",
              "updatedAt": "2025-11-11T07:04:39.507Z",
              "id": "019a71bb-1d53-7445-a1a1-0d5ae42e018f"
            }
          ],
          "assistantPromptBlocks": [
            {
              "name": "History Message 1",
              "template": "{{turn.char_name}}: {{turn.content}}",
              "type": "plain",
              "createdAt": "2025-11-11T07:04:39.507Z",
              "updatedAt": "2025-11-11T07:04:39.507Z",
              "id": "019a71bb-1d53-7445-a1a1-1494f49454ac"
            }
          ],
          "userMessageRole": "user",
          "charMessageRole": "assistant",
          "subCharMessageRole": "user",
          "createdAt": "2025-11-11T07:04:39.507Z",
          "id": "history-1761712919655"
        }
      ],
      "textPrompt": "",
      "enabledParameters": {},
      "parameterValues": {},
      "enabledStructuredOutput": true,
      "outputFormat": "text_output",
      "outputStreaming": false,
      "schemaName": "response",
      "schemaFields": [
        {
          "name": "hp_diff",
          "type": "number",
          "array": false,
          "maximum": 15,
          "minimum": -15,
          "required": true,
          "description": "How much health points did {{user.name}} gain or lose based on the most recent situation. Positive number means a health gain and negative number means a health loss."
        },
        {
          "name": "mp_diff",
          "type": "number",
          "array": false,
          "maximum": 15,
          "minimum": -15,
          "required": true,
          "description": "How much magic points did {{user.name}} gain or use based on the most recent situation. Positive number means a magic point gain and negative number means a magic point spent."
        },
        {
          "name": "user_status",
          "type": "string",
          "array": false,
          "required": true,
          "description": "Describe the user character's current status conditions as a concise list with appropriate emoji prefixes.\r\nInclude: status ailments (poisoned, paralyzed, cursed, bleeding, etc.), buffs (blessed, strengthened, hastened, etc.), and any temporary conditions.\r\nIf the character has no special conditions, return \"‚úÖ Normal\".\r\n\r\nFormat: \"[Emoji] Status\" - use comma to separate multiple statuses.\r\n\r\nCommon status emojis:\r\n- ‚úÖ Normal (no conditions)\r\n- ‚ò†Ô∏è Poisoned\r\n- ü©∏ Bleeding\r\n- üí´ Paralyzed / Stunned\r\n- üåë Cursed\r\n- ‚ú® Blessed\r\n- üí™ Strengthened\r\n- üí® Hastened\r\n- üåø Regenerating\r\n- üî• Burning\r\n- ‚ùÑÔ∏è Frozen\r\n- üòµ Confused\r\n- üõ°Ô∏è Protected\r\n\r\nExamples: \r\n- \"‚ò†Ô∏è Poisoned, üí´ Weakened\" \r\n- \"‚ú® Blessed, üåø Regenerating\" \r\n- \"‚úÖ Normal\"\r\n\r\nKeep it brief and clear - use standard RPG terminology with matching emojis."
        },
        {
          "name": "is_battle",
          "type": "boolean",
          "array": false,
          "required": true,
          "description": "Is {{user.name}} still in physical conflict that {{user.name}} has most recently engaged in?"
        }
      ],
      "tokenCount": 0,
      "color": "#93C5FD",
      "createdAt": "2025-12-04T05:34:05.175Z",
      "updatedAt": "2025-12-04T05:35:40.432Z",
      "modelTier": "light",
      "flowId": "019ae7da-7552-733a-9700-ad94fade375a"
    },
    "019ae7da-7552-733a-9700-95e5847bc895": {
      "name": "rp_agent_user",
      "description": "",
      "targetApiType": "chat",
      "apiSource": "lmstudio",
      "modelId": "llama-3.1-8b-stheno-v3.4",
      "modelName": "llama-3.1-8b-stheno-v3.4",
      "promptMessages": [
        {
          "type": "plain",
          "enabled": true,
          "role": "system",
          "promptBlocks": [
            {
              "name": "Message 1",
              "template": "You are impersonating {{user.name}} (the user's character) in a fantasy roleplay scenario. Your job is to write dialogue and actions AS {{user.name}}, capturing their voice, personality, and mannerisms.\n\n#Impersonation Priority\n1. **If previous messages from {{user.name}} exist**: Study them closely and mimic exactly how they spoke - their vocabulary, tone, sentence structure, and mannerisms.\n2. **If NO previous messages exist**: Use {{user.name}}'s character description to imagine how they would naturally speak and act. Stay true to their personality, background, and traits as described.\n\n## Character You Are Impersonating\n- Name: {{user.name}}\n- Description: {{user.description}}\n\n## Other Characters in the Scene\n- {{cast.active.name}}: {{cast.active.description}}\n\n## Additional Information\nUse any of the following information that is relevant to current situation. If it is not relevant, ignore it.\n\n{% for entry in session.entries %}\n{{entry}}\n{% endfor %}\n\n## Scenario\n{{session.scenario}}\n\n## Previous Summary\n{{previous_summary}}\n\n## Last Message",
              "type": "plain",
              "createdAt": "2025-11-11T07:09:23.061Z",
              "updatedAt": "2025-11-11T07:09:23.061Z",
              "id": "019a71bf-70f5-7445-a1a1-5d5f654a58df"
            }
          ],
          "createdAt": "2025-11-11T07:09:23.061Z",
          "id": "message-1761719181030"
        },
        {
          "type": "history",
          "enabled": true,
          "historyType": "split",
          "start": 0,
          "end": 10,
          "countFromEnd": true,
          "userPromptBlocks": [
            {
              "name": "History Message 1",
              "template": "{{turn.char_name}}: {{turn.content}}",
              "type": "plain",
              "createdAt": "2025-11-11T07:09:23.061Z",
              "updatedAt": "2025-11-11T07:09:23.061Z",
              "id": "019a71bf-70f5-7445-a1a1-65b7270b7bc9"
            }
          ],
          "assistantPromptBlocks": [
            {
              "name": "History Message 1",
              "template": "{{turn.char_name}}: {{turn.content}}",
              "type": "plain",
              "createdAt": "2025-11-11T07:09:23.061Z",
              "updatedAt": "2025-11-11T07:09:23.061Z",
              "id": "019a71bf-70f5-7445-a1a1-685daf03ccc2"
            }
          ],
          "userMessageRole": "user",
          "charMessageRole": "assistant",
          "subCharMessageRole": "user",
          "createdAt": "2025-11-11T07:09:23.061Z",
          "id": "history-1761724048843"
        },
        {
          "type": "plain",
          "enabled": true,
          "role": "user",
          "promptBlocks": [
            {
              "name": "Message 3",
              "template": "#Critical Impersonation Rules\n- You ARE {{user.name}}. Write EXACTLY like they would.\n- If previous messages exist: Copy their exact style, not generic AI writing.\n- If NO previous messages exist: Base your style on their character description - imagine how this person would naturally talk.\n- Match their emotional tone, energy level, and personality.\n- DO NOT add AI-like flourishes, explanations, or overly descriptive prose.\n- Keep it natural and human-like, as {{user.name}} would actually respond.\n- **CRITICAL: NEVER write dialogue or actions for {{cast.active.name}} or any other character.**\n- Write in third person POV, from {{user.name}}'s perspective.\n",
              "type": "plain",
              "createdAt": "2025-11-11T07:09:23.061Z",
              "updatedAt": "2025-11-11T07:09:23.061Z",
              "id": "019a71bf-70f5-7445-a1a1-7245f18747cf"
            }
          ],
          "createdAt": "2025-11-11T07:09:23.061Z",
          "id": "message-1762844198674"
        }
      ],
      "textPrompt": "",
      "enabledParameters": {},
      "parameterValues": {},
      "enabledStructuredOutput": false,
      "outputFormat": "text_output",
      "outputStreaming": true,
      "schemaName": "response",
      "schemaFields": [],
      "tokenCount": 0,
      "color": "#67E8F9",
      "createdAt": "2025-12-04T05:34:05.187Z",
      "updatedAt": "2025-12-04T05:36:10.142Z",
      "modelTier": "light",
      "flowId": "019ae7da-7552-733a-9700-ad94fade375a"
    }
  },
  "dataStoreNodes": {
    "019ae7da-7552-733a-9700-89254170b262": {
      "name": "New Data Update",
      "color": "#FCD34D",
      "dataStoreFields": [
        {
          "id": "019a2e91-3fa3-7eeb-9d6f-7ca5c478a941",
          "schemaFieldId": "019a2ae9-32ea-7333-ab7d-88985327b33d",
          "logic": "{{hp-results_tally.hp_diff}}"
        },
        {
          "id": "019a2e93-6783-7eeb-9d6f-87a36cf8420f",
          "schemaFieldId": "019a2aea-62e5-7333-ab7d-9dd99fb3acbb",
          "logic": "{{mp-results_tally.mp_diff}}"
        },
        {
          "id": "019a2e93-d33d-7eeb-9d6f-8e851f571bcd",
          "schemaFieldId": "019a2aeb-744e-7333-ab7d-a8d4ae783943",
          "logic": "{{results_tally.user_status}}"
        },
        {
          "id": "019a2e94-571d-7eeb-9d6f-90f9527ccad2",
          "schemaFieldId": "019a2b00-b800-7333-ab7d-c926a56b202c",
          "logic": "{{results_tally.is_battle}}"
        }
      ],
      "createdAt": "2025-12-04T05:34:05.190Z",
      "updatedAt": "2025-12-04T05:34:05.190Z"
    },
    "019ae7da-7552-733a-9700-9bda75186272": {
      "name": "Summary update",
      "color": "#F0ABFC",
      "dataStoreFields": [
        {
          "id": "019a71b7-f5b0-7445-a1a0-8f0a55165e64",
          "schemaFieldId": "019a71a6-bc7b-711e-956d-ffea65a0f685",
          "logic": "{{summarization.response}}"
        }
      ],
      "createdAt": "2025-12-04T05:34:05.198Z",
      "updatedAt": "2025-12-04T05:34:05.198Z"
    },
    "019ae7da-7552-733a-9700-a6bbc23678c1": {
      "name": "before_end_node",
      "color": "#FDE047",
      "dataStoreFields": [],
      "createdAt": "2025-12-04T05:34:05.209Z",
      "updatedAt": "2025-12-04T05:34:05.209Z"
    }
  },
  "exportedAt": "2025-12-04T05:39:13.127Z",
  "exportedBy": "astrsk-v2.3.0",
  "metadata": {
    "processing": {
      "agents": {
        "found": 5,
        "exported": 5,
        "failed": 0
      },
      "dataStoreNodes": {
        "found": 3,
        "exported": 3,
        "failed": 0
      },
      "ifNodes": {
        "found": 0,
        "exported": 0,
        "failed": 0
      }
    },
    "totalNodes": 12,
    "nodeTypes": {
      "start": 3,
      "end": 1,
      "agent": 5,
      "dataStore": 3
    }
  }
}